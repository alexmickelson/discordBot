services:
  discord-bot:
    build: .
    container_name: discord-bot
    env_file:
      - .env
    restart: always
    ports:
      - "5677:5677"
      - "5678:5678"

    volumes:
      - songs-data:/tmp/songs

  mcpo:
    image: ghcr.io/open-webui/mcpo:main
    container_name: mcpo-discord
    command:
      [
        "--host",
        "0.0.0.0",
        "--port",
        "5679",
        "--server-type",
        "streamable_http",
        "--",
        "http://discord-bot:5678/mcp",
      ]
    ports:
      - "5679:5679"
    restart: unless-stopped

volumes:
  songs-data:
